---
## Front matter
title: "Отчёт по лабораторной работе №9"
subtitle: "Текстовой редактор emacs"
author: "Митичкина Екатерина Павловна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Познакомиться с операционной системой Linux. Получить практические навыки работы с редактором Emacs.

# Задача
1.	Ознакомиться с теоретическим материалом.
2.	Ознакомиться с редактором **emacs**.
3.	Выполнить упражнения.
4.	Ответить на контрольные вопросы.

 
Основные команды emacs
1.	Открыть emacs.
2.	Создать файл **lab07.sh** с помощью комбинации `Ctrl-x` `Ctrl-f` (`C-x C-f`)
3.	Наберите текст:
```
#!/bin/bash 
HELL=Hello 
function hello {
    LOCAL HELLO=World
    echo $HELLO
}
echo $HELLO 
hello
```
4.	Сохранить файл с помощью комбинации	(`C-x C-s`).
5.	Проделать с текстом стандартные процедуры редактирования, каждое действие должно осуществляться комбинацией клавиш.
    1.	Вырезать одной командой целую строку (`С-k`).
    2.	Вставить эту строку в конец файла (`C-y`).
    3.	Выделить область текста (`C-space`).
    4.	Скопировать область в буфер обмена (`M-w`).
    5.	Вставить область в конец файла.
    6.	Вновь выделить эту область и на этот раз вырезать её (`C-w`).
    7.	Отмените последнее действие (`C-/`).
6.	Научитесь использовать команды по перемещению курсора.
    1.	Переместите курсор в начало строки (`C-a`).
    2.	Переместите курсор в конец строки (`C-e`).
    3.	Переместите курсор в начало буфера (`M-<`).
    4.	Переместите курсор в конец буфера (`M->`).
7.	Управление буферами.
    1.	Вывести список активных буферов на экран (`C-x C-b`).
    2.	Переместитесь во вновь открытое окно (`C-x`) o со списком открытых буферов и переключитесь на другой буфер.
    3.	Закройте это окно (`C-x 0`).
    4.	Теперь вновь переключайтесь между буферами, но уже без вывода их списка на экран (`C-x b`).
8.	Управление окнами.
    1.	Поделите фрейм на 4 части: разделите фрейм на два окна по вертикали (`C-x 3`), а затем каждое из этих окон на две части по горизонтали (`C-x 2`).      
    2.	В каждом из четырёх созданных окон откройте новый буфер (файл) и введите несколько строк текста.
9.	Режим поиска
    1.	Переключитесь в режим поиска (`C-s`) и найдите несколько слов, присутствующих в тексте.
    2.	Переключайтесь между результатами поиска, нажимая `C-s`.
    3.	Выйдите из режима поиска, нажав `C-g`.
    4.	Перейдите в режим поиска и замены (`M-%`), введите текст, который следует найти и заменить, нажмите `Enter` , затем введите текст для замены. После того как будут подсвечены результаты поиска, нажмите `!` для подтверждения замены.
    5.	Испробуйте другой режим поиска, нажав `M-s o`. Объясните, чем он отличается от
    обычного режима?








# Теоретическое введение: 
**Emacs** представляет собой мощный экранный редактор текста, написанный на языке высокого уровня **Elisp**.

## Основные термины Emacs
**Определение 1.**  Буфер — объект, представляющий какой-либо текст.

Буфер может содержать что угодно, например, результаты компиляции программы или встроенные подсказки. Практически всё взаимодействие с пользователем, в том числе интерактивное, происходит посредством буферов.

**Определение 2.** Фрейм соответствует окну в обычном понимании этого слова. Каждый фрейм содержит область вывода и одно или несколько окон **Emacs**.

**Определение 3.** Окно — прямоугольная область фрейма, отображающая один из буферов.

Каждое окно имеет свою строку состояния, в которой выводится следующая информация: название буфера, его основной режим, изменялся ли текст буфера и как далеко вниз по буферу расположен курсор. Каждый буфер находится только в одном из возможных основных режимов. Существующие основные режимы включают режим **Fundamental** (наименее специализированный), режим **Text**, режим **Lisp**, режим **С**, режим **Texinfo** и другие. Под второстепенными режимами понимается список режимов, которые включены в данный момент в буфере выбранного окна.

**Определение 4.** Область вывода — одна или несколько строк внизу фрейма, в которой Emacs выводит различные сообщения, а также запрашивает подтверждения и дополнительную информацию от пользователя.

**Определение 5.** Минибуфер используется для ввода дополнительной информации и всегда отображается в области вывода.

**Определение 6.**  Точка вставки — место вставки (удаления) данных в буфере.

## Основы работы в Emacs
Для запуска **Emacs** необходимо в командной строке набрать **emacs** (или **emacs &** для работы в фоновом режиме относительно консоли).

Для работы с **Emacs** можно использовать как элементы меню, так и различные сочетания клавиш. Например, для выхода из **Emacs** можно воспользоваться меню `File` и выбрать пункт `Quit` , а можно нажать последовательно `Ctrl-x` `Ctrl-c` (в обозначениях Emacs: `C-x C-c`).

Многие рутинные операции в Emacs удобнее производить с помощью клавиатуры, а не графического меню. Наиболее часто в командах Emacs используются сочетания c клавишами `Ctrl`	и `Meta` (в обозначениях **Emacs**: `C-` и `M-`; клавиша `Shift` в **Emasc** обозначается как `S-`). Так как на клавиатуре для IBM PC совместимых ПК клавиши `Meta`	нет, то вместо неё можно использовать `Alt`	или  `Esc` . Для доступа к системе меню используйте клавишу `F10`.

Клавиши `Ctrl` , `Meta`	и `Shift`	принято называть префиксными. Например, запись `M-x` означает, что надо удерживая клавишу	`Meta` (или `Alt`), нажать на клавишу `x`. Для открытияфайла следует использовать команду `C-x C-f` (надо, удерживая клавишу `Ctrl`	, нажать на клавишу `x`, затем отпустить обе клавиши и снова, удерживая клавишу `Ctrl`, нажать на клавишу `f`).
 
 По назначению префиксные сочетания клавиш различаются следующим образом:
- `C-x` — префикс ввода основных команд редактора (например, открытия, закрытии, сохранения файла и т.д.);
- `C-c` — префикс вызова функций, зависящих от используемого режима.

**Определение 7.** Режим — пакет расширений, изменяющий поведение буфера Emacs при редактировании и просмотре текста (например, для редактирования исходного текста программ на языках С или Perl).

В табл. приведены основные комбинации клавиш, используемые для перемещения курсора в буфере Emacs (также работают и обычные навигационные клавиши, например, стрелки).

|Основные комбинации клавиш для перемещения курсора в буфере Emacs|
|--------------|

| Комбинация клавиш | Действие|
|-------------|--------------|
|`C-p` |	переместиться вверх на одну строку |
|`C-n	`|переместиться вниз на одну строку|
|`C-f`	|переместиться вперёд на один символ|
|`C-b	`|переместиться назад на один символ|
|`C-a`|	переместиться в начало строки|
|`C-e`|	переместиться в конец строки|
| `C-v`|	переместиться вниз на одну страницу|
|`M-v`|	переместиться вверх на одну страницу|
|`M-f`|	переместиться вперёд на одно слово|
|`M-b`|	переместиться назад на одно слово|
|`M-<`|	переместиться в начало буфера|
|`M->`|	переместиться в конец буфера|
|`C-g`|	закончить текущую операцию|

Далее в табл.  приведены наиболее часто используемые комбинации клавиш для выполнения действий в Emacs.

|Основные комбинации клавиш для работы с текстом в Emacs|
|--------------|

| Комбинация клавиш | Действие|
|-------------|--------------|
|`C-d` |Удалить символ перед текущим положением курсора |
|`M-b	`|Удалить следующее за текущим положением курсора слово|
|`C-k `	| 	Удалить текст от текущего положения курсора до конца строки|
|`M-k	`|Удалить текст от текущего положения курсора до конца предложения|
|`M-\	`|Удалить все пробелы и знаки табуляции вокруг текущего положения курсора|
|`C-q		`| Вставить символ, соответствующий нажатой клавише или сочетанию|
|`M-q	`|Выровнять текст в текущем параграфе буфера|
	
    
|Основные комбинации клавиш для работы с выделенной областью текста в Emacs|
|--------------|

| Комбинация клавиш | Действие|
|-------------|--------------|
|`C-space	`|Начать выделение текста с текущего положения курсора|
|`C-w	`|Удалить выделенную область текста в список удалений|
|`M-w	`|Скопировать выделенную область текста в список удалений|
|`C-y	`|Вставить текст из списка удалений в текущую позицию курсора|
|`M-y	`|Последовательно вставить текст из списка удалений|
|`M-\	`|Выровнять строки выделенной области текста|

	
## Регулярные выражения
При работе с командами Emacs можно использовать регулярные выражения (табл.). Основные отличия от PCRE (**Perl Compatible Regular Expressions** — библиотека регулярных выражений в стиле Perl):
- `\s` не задаёт пробел;
- 	`\t` не задаёт табуляцию;
- операция «или» и скобки группировки экранируются.

|Основные комбинации клавиш для поиска и замены в Emacs|
|--------------|

| Комбинация клавиш   |  Действие|
|--------------------|--------------------|
|`C-s	текст поиска	`|Поиск текста в прямом направлении |
|`C-r	текст поиска`|Поиск текста в обратном направлении |
|`M-%		`| Поиск текста и его замена с запросом (что на что заменить)|

 
|Основные комбинации клавиш для работы с файлами, буферами и окнами в Emacs|
|--------------|

| Комбинация клавиш   |  Действие|
|--------------------|--------------------|
|`C-x C-f`|Открыть файл|
|`C-x C-s`|Сохранить текст в буфер|
|`C-x C-b`|Отобразить список открытых буферов в новом окне|
|`C-x b`|Переключиться в другой буфер в текущем окне|
|`C-x i`|Вставить содержимое файла в буфер в текущую позицию курсора|
|`C-x 0`|Закрыть текущее окно (при этом буфер не удаляется)|
|`C-x 1`|	Закрыть все окна кроме текущего|
|`C-x 2`|Разделить окно по горизонтали|
|`C-x o	`|Перейти в другое окно|

|Основные комбинации клавиш для работы со справкой в Emacs|
|--------------|

| Комбинация клавиш   |  Действие|
|--------------------|--------------------|
|`C-h ? `|Показать информацию по работе со справочной системой |
|`C-h t `| Вызвать интерактивный учебник|
|`C-h f `|Показать информацию по функции |
|`C-h v `|Показать информацию по переменной |
|`C-h k `|Показать информацию по действию комбинации клавиш |
|`C-h a `| Выполнить поисковый запрос в справке по строке или регулярному выражению|
|`C-h F `| Вызвать Emacs FAQ|
|`C-h i `|Показать документацию по Emacs (Info) |
|` `| |

|***Прочие комбинации клавиш, используемые в Emacs***|
|--------------|

| Комбинация клавиш   |  Действие|
|--------------------|--------------------|
|`C-\ `| Переключить язык|
|`M-x command `| Выполнить команду Emacs с именем command|
|`C-x u `| Отменить последнюю операцию|


|Регулярные выражения в Emacs||
|--------------------|--------------------|
|`Ctrl-q Ctrl-j`| новая строка |
|`Ctrl-q  `| табуляция |
|`. `| любой знак кроме новой строки |
|`* `| повторение предыдущего 0–n раз, жадное|
|`+ `|повторение предыдущего 1–n раз, жадное |
|`? `| повторение предыдущего 0–1 раз, жадное|
|`*?,+?,?? `|аналогично предыдущим, ленивые |
|` [...]`| набор символов, ^ в начале строки — «не эти символы»|
|` ^`| начало строки|
|`$ `| конец строки|
|`\ `|или |
|`\(...\) `|группировка |
|`\b `| граница слова|
|`\B `| не граница слова|
|`\w`| буквенный символ|
|`\W `|небуквенный символ |
|`\1 `| ссылка на первую группу|




# Выполнение лабораторной работы
1.	Ознакомилась с теоретическим материалом.
2.	Ознакомилась с редактором  **emacs**.
3.	Выполнила упражнения.

### Основные команды emacs:
1. Открыла emacs.
![открытие emacs](img/1.png)  

2.	Создала файл **lab07.sh** с помощью комбинации `Ctrl-x` `Ctrl-f` (`C-x C-f`)
![создание lab07.sh](img/2.png)
![создание lab07.sh](img/3.png)

3.	Наберала текст:
![текст](img/4.png)

4.	Сохранила файл с помощью комбинации	(`C-x C-s`).

 
5.	Вырезала одной командой целую строку (`С-k`).
![ввырез текста](img/5.png)

6.	Вставила эту строку в конец файла (`C-y`).
![вставка текста](img/6.png)
 
7. Выделила область текста (`C-space`).
![выделение текста](img/7.png)

8. Скопировала область в буфер обмена (`M-w`).

9. Вставила область в конец файла.
![файл исполняемый](img/8.png)

10. Вновь выделила эту область и на этот раз вырезала её (`C-w`).
![вызов файла](img/9.png)
11. Отменила последнее действие (`C-/`).
![вызов файла](img/10.png)
12. Переместила курсор в начало строки (`C-a`).
13.	Переместила курсор в конец строки (`C-e`).
14.	Переместила курсор в начало буфера (`M-<`).
15.	Переместила курсор в конец буфера (`M->`).



16. Вывела список активных буферов на экран (`C-x C-b`).
![список акивных буферов](img/28.png)
17.	Переместила во вновь открытое окно (`C-x`) o со списком открытых буферов и переключилась на другой буфер.
![список акивных буферов](img/27.png)
18.	Закрыла это окно (`C-x 0`).
19.	Теперь вновь переключилась между буферами, но уже без вывода их списка на экран (`C-x b`).
20.	Поделила фрейм на 4 части: разделила фрейм на два окна по вертикали (`C-x 3`), а затем каждое из этих окон на две части по горизонтали (`C-x 2`).  
![деление фрейм](img/17.png)  

21.	В каждом из четырёх созданных окон открыла новый буфер (файл) и ввела несколько строк текста.
![новый текст](img/18.png)

22.	Переключилась в режим поиска (`C-s`) и нашла несколько слов, присутствующих в тексте.
![поиск](img/19.png)

23.	Переключилась между результатами поиска, нажала `C-s`.
![новый текст](img/20.png)
24.	Вышла из режима поиска, нажала `C-g`.

25.	Перешла в режим поиска и замены (`M-%`), ввела текст, который следует найти и заменить, нажмала `Enter` , затем ввела текст для замены. После того как будут подсвечены результаты поиска, нажала `!` для подтверждения замены.
![замена](img/24.png)
![замена](img/25.png)
26.	Испробовала другой режим поиска, нажав `M-s o`.
![замена](img/26.png)


# Выводы
В результате работы познакомилась с операционной системой Linux. Получить практические навыки работы с редактором Emacs.


# Ответы на контрольные вопросы
1. Кратко охарактеризуйте редактор emacs.  

Emacs — один из наиболее мощных и широко распространённых редакторов, используемых в мире Unix. По популярности он соперничает с редактором vi и его клонами. В зависимости от ситуации, Emacs может быть:

* текстовым редактором;
* программой для чтения почты и новостей Usenet;
* интегрированной средой разработки (IDE);
* операционной системой;

2. Какие особенности данного редактора могут сделать его сложным для освоения новичком?

Слишком большое число полезных комбинаций клавиш, которые надо запомнить.

3. Своими словами опишите, что такое буфер и окно в терминологии emacs’а.

Буфер - это виртуальный файл, представляющий собой произвольный текст. Окно - графическая область редактора, отображающая один из буферов.

4. Можно ли открыть больше 10 буферов в одном окне?

Да, можно. 

5. Какие буферы создаются по умолчанию при запуске emacs?

*	GNU Emacs
*	scratch
*	Messages

6. Какие клавиши вы нажмёте, чтобы ввести следующую комбинацию C-c | и C-c C-|?
7. Как поделить текущее окно на две части?  

Нажать комбинацию C-x 3 (по вертикали) или C-x 2 (по горизонтали).

8. В каком файле хранятся настройки редактора emacs?

В файле “.emacs”.

9. Какую функцию выполняет клавиша backspace и можно ли её переназначить?

Клавиша backspace служит для сдвига каретки - стирания набранных ранее символов. Переназначить backspace можно.

10. Какой редактор вам показался удобнее в работе vi или emacs? Поясните почему

Emacs, так как Emacs позволяет разбить фрейм на несколько окон и одновременно редактировать сразу несколько файлов.
