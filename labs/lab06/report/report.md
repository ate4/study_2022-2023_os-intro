---
## Front matter
title: "Отчёт по лабораторной работе №6"
subtitle: "Поиск файлов. Перенаправление ввода-вывода. Просмотр запущенных процессов"
author: "Митичкина Екатерина Павловна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Ознакомление с инструментами поиска файлов и фильтрации текстовых данных. Приобретение практических навыков: по управлению процессами (и заданиями), по проверке использования диска и обслуживанию файловых систем.

# Задача
1. Осуществите вход в систему, используя соответствующее имя пользователя.
2. Запишите в файл file.txt названия файлов, содержащихся в каталоге /etc. Допишите в этот же файл названия файлов, содержащихся в вашем домашнем каталоге.
3. Выведите имена всех файлов из file.txt, имеющих расширение .conf, после чего запишите их в новый текстовой файл conf.txt.
4. Определите, какие файлы в вашем домашнем каталоге имеют имена, начинавшиеся с символа c? Предложите несколько вариантов, как это сделать.
5. Выведите на экран (по странично) имена файлов из каталога /etc, начинающиеся с символа h.
6. Запустите в фоновом режиме процесс, который будет записывать в файл ~/logfile файлы, имена которых начинаются с log.
7. Удалите файл ~/logfile.fi
8. Запустите из консоли в фоновом режиме редактор gedit.
9. Определите идентификатор процесса gedit, используя команду ps, конвейер и фильтр grep. Как ещё можно определить идентификатор процесса?
10. Прочтите справку (man) команды kill, после чего используйте её для завершения процесса gedit.
11. Выполните команды df и du, предварительно получив более подробную информацию об этих командах, с помощью команды man.
12. Воспользовавшись справкой команды find, выведите имена всех директорий, имеющихся в вашем домашнем каталоге.


# Теоретическое введение: 
## Перенаправление ввода-вывода

В системе по умолчанию открыто три специальных потока:  
– stdin — стандартный поток ввода (по умолчанию: клавиатура), файловый дескриптор 0;  
– stdout — стандартный поток вывода (по умолчанию: консоль), файловый дескриптор 1;  
– stderr — стандартный поток вывод сообщений об ошибках (по умолчанию: консоль), файловый дескриптор 2.    
Большинство используемых в консоли команд и программ записывают результаты своей работы в стандартный поток вывода stdout. Например, команда ls выводит в стандартный поток вывода (консоль) список файлов в текущей директории. Потоки вывода и ввода можно перенаправлять на другие файлы или устройства. Проще всего это делается с помощью символов >, >>, <, <<. Рассмотрим пример.

```
# Перенаправление stdout (вывода) в файл. 
# Если файл отсутствовал, то он создаётся, # иначе -- перезаписывается.
# Создаёт файл, содержащий список дерева каталогов.
ls -lR > dir-tree.list

1>filename
# Перенаправление вывода (stdout) в файл "filename".
1>>filename
# Перенаправление вывода (stdout) в файл "filename", 
# файл открывается в режиме добавления.
2>filename
# Перенаправление stderr в файл "filename".
2>>filename
# Перенаправление stderr в файл "filename", 
# файл открывается в режиме добавления.
&>filename
# Перенаправление stdout и stderr в файл "filename".
```


## Конвейер 

Конвейер (pipe) служит для объединения простых команд или утилит в цепочки, в которых результат работы предыдущей команды передаётся последующей. Синтаксис следующий:
```
команда 1 | команда 2
# означает, что вывод команды 1 передастся на ввод команде 2
```

Конвейеры можно группировать в цепочки и выводить с помощью перенаправления в файл, например:
```
ls -la |sort > sortilg_list
```

вывод команды **ls -la** передаётся команде сортировки **sort\verb**, которая пишет результат в файл **sorting_list\verb**.
Чаще всего скрипты на **Bash** используются в качестве автоматизации каких-то рутинных операций в консоли, отсюда иногда возникает необходимость в обработке stdout одной команды и передача на **stdin** другой команде, при этом результат выполнения команды должен обработан.


## Поиск файла
Команда **find** используется для поиска и отображения на экран имён файлов, соответствующих заданной строке символов.  
Формат команды:
```
find путь [-опции]
```

Путь определяет каталог, начиная с которого по всем подкаталогам будет вестись поиск.  
  
**Примеры:**
1. Вывести на экран имена файлов из вашего домашнего каталога и его подкаталогов, начинающихся на **f**:
``` 
find ~ -name "f*" -print
```

Здесь **~** — обозначение вашего домашнего каталога, **-name** — после этой опции указывается имя файла, который нужно найти, **"f*"** — строка символов, определяющая имя файла, -print — опция, задающая вывод результатов поиска на экран.  
2. Вывести на экран имена файлов в каталоге /etc, начинающихся с символа p:
```
find /etc -name "p*" -print

```

3. Найти в Вашем домашнем каталоге файлы, имена которых заканчиваются символом ~ и удалить их:
```
find ~ -name "*~" -exec rm "{}" \;
```

Здесь опция **-exec rm "{}" \;** задаёт применение команды **rm** ко всем файлам, имена которых соответствуют указанной после опции **-name** строке символов.  
Для просмотра опций команды **find** воспользуйтесь командой **man**.


## Фильтрация текста
Найти в текстовом файле указанную строку символов позволяет команда **grep**.  
Формат команды:
```
grep строка имя_файла

```

Кроме того, команда **grep** способна обрабатывать стандартный вывод других команд (любой текст). Для этого следует использовать конвейер, связав вывод команды с вводом grep.  
  
**Примеры:**
1. Показать строки во всех файлах в вашем домашнем каталоге с именами, начинающимися на **f**, в которых есть слово **begin**:
```
grep begin f*!

```

2. Найти в текущем каталоге все файлы, содержащих в имени «лаб»:
```
ls -l | grep лаб

```


## Проверка использования диска
Команда **df** показывает размер каждого смонтированного раздела диска.   
Формат команды:
```
df [-опции] [файловая_система]

```

**Пример:**

```
df -vi
```

Команда **du** показывает число килобайт, используемое каждым файлом или каталогом.   
Формат команды:
```
du [-опции] [имя_файла...]
```

**Пример.**
```
du -a ~/
```


На **afs** можно посмотреть использованное пространство командой
```
fs guota
```

## Управление задачами
Любую выполняющуюся в консоли команду или внешнюю программу можно запустить в фоновом режиме. Для этого следует в конце имени команды указать знак амперсанда **&**.   
Например:
```
gedit &
```

Будет запущен текстовой редактор **gedit** в фоновом режиме. Консоль при этом не будет заблокирована.  
Запущенные фоном программы называются задачами (jobs). Ими можно управлять с помощью команды **jobs**, которая выводит список запущенных в данный момент задач. Для завершения задачи необходимо выполнить команду
```
kill %номер задачи
```


## Управление процессами
Любой команде, выполняемой в системе, присваивается идентификатор процесса (process ID). Получить информацию о процессе и управлять им, пользуясь идентификатором процесса, можно из любого окна командного интерпретатора.


## Получение информации о процессах
Команда **ps** используется для получения информации о процессах.   
Формат команды:
```
ps [-опции]
```

Для получения информации о процессах, управляемых вами и запущенных (работающих или остановленных) на вашем терминале, используйте опцию **aux**.  
  
**Пример:**
```
ps aux 
```

Для запуска команды в фоновом режиме необходимо в конце командной строки указать знак **&** (амперсанд).  
Пример работы, требующей много машинного времени для выполнения, и которую целесообразно запустить в фоновом режиме:
```
find /var/log -name "*.log" -print > l.log &
```

# Выполнение лабораторной работы

## 1.	Осуществите вход в систему, используя соответствующее имя пользователя.
Вошла в личный кабинет в Fedora.  

![вход в систему](https://github.com/ate4/study_2022-2023_os-intro/blob/bdbaff0b1bd872cb3a91b6f681626822ac8d168c/labs/lab06/report/img/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202022-05-05%20%D0%B2%2014.00.35.png)


# Выводы
В результате работы ознакомилась с файловой системой Linux, её структурой, именами и содержанием каталогов. Приобретила практических навыков по применению команд для работы с файлами и каталогами, по управлению процессами (и работами), по проверке использования диска и обслуживанию файловой системы.



# Ответы на контрольные вопросы
1. Дайте характеристику каждой файловой системе, существующей на жёстком диске компьютера, на котором вы выполняли лабораторную работу.  
**Tmpfs** - временное файловое хранилище во многих Unix-подобных ОС и в частности Linux. Предназначена для монтирования файловой системы, но размещается в ОЗУ вместо физического диска. 

2. Приведите общую структуру файловой системы и дайте характеристику каждой директории первого уровня этой структуры.  

- /bin - каталог, содержащий исполняемые файлы. Монтируется на корневую файловую систему, должен быть доступен даже если никакие другие файловые системы не смонтированы.

- /dev - содержит файлы физических устройств, которые могут входить в состав аппартного обеспечения компьютера.

- /home - каталог, содержащий в себе домашние каталоги пользователей операционный системы, в которых хранятся их данные, настройки, пароли и т.д.

- /lib64 - каталог, присутсвующий на 64-битных системах, содержащий набор библиотек и компонентов компилятора языка C для 64-битных систем.

- /media - точка для автоматического монтирования различных устройств: USB-накопители, CD-ROM и т.д.

- /opt - содержит подкаталоги для дополнительных пакетов программного обеспечения.

- /root - Домашний каталог пользователя root. Он мог бы лежать в папке /home, но находится на первом уровне для большей надежности системы.

- /sbin - содержит иполняемые файлы, предназначеные для запуска пользователем при администрировании системы.

- /sys - точка монтирования виртуальной файловой системы sysfs с информацией об устройствах, драйверах, ядре ОС, гипервизоре и т.д.

- /usr - бинарные файлы, используемые только пользователями, например игры.

- /boot - файлы, нужные для запуска ОС (образы ядер Linux и файлы менеджеров загрузки).

- /etc - содержит основные конфигурационные файлы операционной системы и различных программ.

- /lib - директория, предназначенная для хранения системных библиотек и компонентов компилятора языка C, необходимых для работы программ из каталогов /bin и /sbin.

- /lost+found - При сбое в работе файловой системы и дальнейшей проверки файлов все найденные поврежденные файлы помещаются в каталог /lost+found, чтобы их можно было попытаться восстановить.

- /mnt - Точка ручного монтирования (используется для временного монтирования с применением команды mount).

- /proc - содержит файлы ядра и процессора. В эту директорию примонтирована виртуальная файловая система procfs, в которой содержатся специальные файлы, в которых находится информация о системе и выполняющихся процессах.

- /run - каталог для хранения вспомогательных временных файлов приложений.

- /srv - содержит данные сервисных служб, предоставляемых системой.

- /tmp - содержит временные файлы, которые удаляются при выключении или перезагрузке системы.

- /var - содержит журналы ОС, системные логи и cache-файлы.

3. Какая операция должна быть выполнена, чтобы содержимое некоторой файловой системы было доступно операционной системе?  
mkfs

4. Назовите основные причины нарушения целостности файловой системы. Как устранить повреждения файловой системы?  

Основной причиной нарушения целостности файловой системы является останова ОС в момент обновления метаданных файлов. Это может привести к дублированию или наоборот потере файлов из-за нарушения инварианта счетчика ссылок или другой важной информации. Для диагности и исправления ошибок файловой системы используется команда fsck.

5. Как создаётся файловая система?  
Создать новую файловую систему можно с помощью команды mkfs.

6. Дайте характеристику командам для просмотра текстовых файлов.   

- cat - подходит для просмотра файлов небольшого размера, выводит всё их содержимое в консоль.
- less - подходит для постраничного просмотра файла, можно переключаться между страницами.
- head - выводит несколько первых строк файла, по умолчанию - 10, но можно указать и другое число.
- tail - выводит несколько последних строк файла, по умолчанию - 10, но можно указать и другое число.

7. Приведите основные возможности команды cp в Linux.  
Команда cp применяется для копирования файлов и каталогов, имеется возможность копирования несколько файлов в один каталог одной командой. Можно копировать файлы в произвольном каталоге, указывая полный или при возможности относительный путь. Для копирования каталогов вместе с их содержимым указывается опция -r. Подробнее об этой команде написано в теоретическом введении.

8. Приведите основные возможности команды mv в Linux.  
Команда mv применется для перемещения и смены имени файлов и каталогов. Подробнее об этой команде написано в теоретическом введении.

9. Что такое права доступа? Как они могут быть изменены?  
Права доступа - набор значений, устанавливающий возможности тех или иных пользователей читать,изменять или исполнять конкретный файл или директорию. Права доступа к файлу можно изменить с помощью команды chmod. Подробнее об этой команде написано в теоретическом введении.
